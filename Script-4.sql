SELECT count(1) FROM t_acc_ks WHERE TRANSACTION_ID LIKE '2020%' AND acc_Date IS null;


-- 15945262


SELECT * FROM T_ACC_KS
WHERE TRANSACTION_ID LIKE '20200625%'
and tel_no ='005402749057'
and acc_date is null; 


SELECT * FROM T_ACC_CB tac WHERE TEL_NO ='005402749057'  AND TRANSACTION_ID LIKE '20200625%'
and acc_date is null; 


SELECT * FROM T_ACC_KS
WHERE TRANSACTION_ID LIKE '202006%'
and tel_no in ('005402749057','000220606493')
and acc_date is null;


SELECT * FROM T_ACC_KS
WHERE TRANSACTION_ID LIKE '20200623%'
and acc_date IS not null;


SELECT * FROM T_ACC_KS trk,  WHERE  TRANSACTION_ID LIKE '20200623%' 
and tel_no in ('005402749057','000220606493')
and acc_date is NULL;


SELECT * FROM T_REACC_KS trk  WHERE 
 (TRANSACTION_ID, seq) IN (SELECT TRANSACTION_ID,seq FROM T_ACC_KS trk WHERE  TRANSACTION_ID LIKE '20200623%' 
and tel_no in ('005402749057','000220606493')
and acc_date is NULL) ;

SELECT  trk.SEQ, trk.ACC_FEE_DTM, trk.TRANSACTION_ID,trk.ACC_DATE, TRK.ACC_FEE_FLAG, TRK.CARD_UNINO, TRK.CARD_ID , TRK2.M_DATE , TRK2.TRANSACTION_ID
FROM T_ACC_KS trk, T_REACC_KS trk2 WHERE trk.TRANSACTION_ID = trk2.TRANSACTION_ID(+)  AND trk.TRANSACTION_ID LIKE '20200619%' 
and trk.acc_date is NULL ORDER BY trk.ACC_FEE_FLAG ;

SELECT * FROM t_acc_ks WHERE CARD_GUBUN  != '1';

-- trk.SEQ, trk.ACC_FEE_DTM, trk.TRANSACTION_ID,trk.ACC_DATE, TRK.ACC_FEE_FLAG, TRK.CARD_UNINO

SELECT * FROM T_REACC_KS trk WHERE TRANSACTION_ID ='20200623081426' AND SEQ ='1634883'


SELECT MAX(TRANSACTION_ID ) FROM T_REACC_KS trk 

SELECT * FROM T_ACC_KS tak  WHERE ACC_FEE_DTM ='20A0061611A217'


SELECT a.SEQ, A.ACC_FEE_DTM , B.M_DATE  ,A.ACC_FEE_FLAG , A.ACC_DATE , a.TRANSACTION_ID, A.TEL_NO, A.CARD_UNINO
,A.SAM_ID , A.ACC_FEE_1 ,A.ACC_FEE_2 , A.ACC_FEE_3 , A.ACC_ERR_CODE , B.M_DATE , B.TRANSACTION_ID , B.ACC_FEE_1 , B.ACC_FEE_2 , B.ACC_FEE_3 
FROM T_ACC_KS A, T_REACC_KS B WHERE A.TRANSACTION_ID = B.TRANSACTION_ID(+)  AND A.TRANSACTION_ID LIKE '20200620%'  AND A.ACC_DATE  IS NULL AND A.ACC_FEE_FLAG != '1';

SELECT SEQ, ACC_FEE_DTM, TRANSACTION_ID FROM T_ACC_KS WHERE TRANSACTION_ID LIKE '202006%'
MINUS 
SELECT SEQ, ACC_FEE_DTM, TRANSACTION_ID FROM T_REACC_KS WHERE TRANSACTION_ID LIKE '202006%';


SELECT to_Date('20200624355244','YYYYMMDDHH24MISS') FROM dual;


 


SELECT * FROM T_ACC_KS tak 
WHERE 1=1
AND ACC_DATE IS NULL
AND (SUBSTR(ACC_FEE_DTM,1,1) > '9'
OR SUBSTR(ACC_FEE_DTM,2,1) > '9'
OR SUBSTR(ACC_FEE_DTM,3,1) > '9'
OR SUBSTR(ACC_FEE_DTM,4,1) > '9'
OR SUBSTR(ACC_FEE_DTM,5,1) > '9'
OR SUBSTR(ACC_FEE_DTM,6,1) > '9'
OR SUBSTR(ACC_FEE_DTM,7,1) > '9'
OR SUBSTR(ACC_FEE_DTM,8,1) > '9'
OR SUBSTR(ACC_FEE_DTM,9,1) > '9'
OR SUBSTR(ACC_FEE_DTM,10,1) > '9'
OR SUBSTR(ACC_FEE_DTM,11,1) > '9'
OR SUBSTR(ACC_FEE_DTM,12,1) > '9'
OR SUBSTR(ACC_FEE_DTM,13,1) > '9'
OR SUBSTR(ACC_FEE_DTM,14,1) > '9')


SELECT  * FROM T_REACC_KS trk 
WHERE 1=1
AND ACC_DATE IS NULL
AND (SUBSTR(ACC_FEE_DTM,1,1) > '9'
OR SUBSTR(ACC_FEE_DTM,2,1) > '9'
OR SUBSTR(ACC_FEE_DTM,3,1) > '9'
OR SUBSTR(ACC_FEE_DTM,4,1) > '9'
OR SUBSTR(ACC_FEE_DTM,5,1) > '9'
OR SUBSTR(ACC_FEE_DTM,6,1) > '9'
OR SUBSTR(ACC_FEE_DTM,7,1) > '9'
OR SUBSTR(ACC_FEE_DTM,8,1) > '9'
OR SUBSTR(ACC_FEE_DTM,9,1) > '9'
OR SUBSTR(ACC_FEE_DTM,10,1) > '9'
OR SUBSTR(ACC_FEE_DTM,11,1) > '9'
OR SUBSTR(ACC_FEE_DTM,12,1) > '9'
OR SUBSTR(ACC_FEE_DTM,13,1) > '9'
OR SUBSTR(ACC_FEE_DTM,14,1) > '9')


SELECT * FROM t_acc_ks;